<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>Terpstra Keyboard WebApp</title>
	
	<meta charset="utf-8"> 
	<meta name="viewport" content="minimal-ui, width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, target-densitydpi=device-dpi">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
	<meta name="author" content="James Fenn">
	
	<link rel="stylesheet" href="normalize.css">
	<link rel="stylesheet" href="skeleton.css">
	
	<style>
		body {
			/*margin: 0;
			padding: 0;
			background-color: #000000;
			color: white;*/
		}
		#fullscreen-setter {
			background: black;
			color: white;
			border-radius: 1em;
			padding: 1em;
			position: absolute;
			top: 50%;
			left: 50%;
			margin-right: -50%;
			transform: translate(-50%, -50%);
			cursor: pointer
		}
		#keyboard {
			position: absolute;
			height: 100%;
			width: 100%;
			top: 50%;
			left: 50%;
			display: none;
		}
		#backButton {
			position: absolute;
			left: 0;
			top: 50%;
			display: none;
			z-index: 100;
		}
		.iosscrollable {
			height: auto;
			-webkit-overflow-scrolling: touch;
		}
	</style>
	
	<script src="QueryData.js"></script>
</head>

<body style="overflow: scroll;">
	
	<div id="landing-page" class="section" style="display: block;">
		<div class="container">
			<h1>Edit Settings</h1>

			<select id="quicklinks" onchange="javascript:location.href = this.value;">
				<option selected="selected" disabled="disabled">Tuning\Layout Quick Links</option>
				<optgroup label="Isomorphic Layouts for 12-ET">
					<option value="keys.htm?fundamental=261.6255653&right=2&upright=1&size=50&rotation=343.897886248&instrument=piano&enum=false&equivSteps=12&piano_colors=true&no_labels=false&scale=!%2012-ed2%20Jank%C3%B3%206-6%20Balanced%20Symmetric%20Bilinear%20Uniform%20Keyboard%20~Halberstadt.scl%0A!%2012-tone%20equal%20tempered%20scale%20consisting%20of%2012%20sonically%20equal%20divisions%20per%20frequency%20halving%2Fdoubling%2C%20mapped%20on%20a%20(hexagonal)%20tilted%20Jank%C3%B3%20layout%20which%20can%20be%20regarded%20as%20a%20stacked%206-6%2FBalanced%2FSymmetric%2FBilinear%2FUniform%20Keyboard%2C%20and%20which%20approximates%20the%207-white%2F5-black%20Halberstadt%20organ%20layout%20(the%20classic%20piano%20keyboard).%0A!%0ATerpstra%20Keyboard%20WebApp%20%7C%2012-ed2%20Jank%C3%B3%20%2F%206-6%2FBalanced%2FSymmetric%2FBilinear%2FUniform%20Keyboard%20%2F%20~Halberstadt%0A12%0A!%0A100.00000%0A200.00000%0A300.00000%0A400.00000%0A500.00000%0A600.00000%0A700.00000%0A800.00000%0A900.00000%0A1000.00000%0A1100.00000%0A1200.00000&names=C%0AD%E2%99%AD%2FC%E2%99%AF%0AD%0AE%E2%99%AD%2FD%E2%99%AF%0AE%0AF%0AG%E2%99%AD%2FF%E2%99%AF%0AG%0AA%E2%99%AD%2FG%E2%99%AF%0AA%0AB%E2%99%AD%2FA%E2%99%AF%0AB">Jankó / 6-6/Balanced/Symmetric/Bilinear/Uniform</option>
					
					<option value="keys.htm?fundamental=261.6255653&right=4&upright=7&size=50&rotation=343.897886248&instrument=harpsichord&enum=false&equivSteps=12&piano_colors=true&no_labels=false&scale=!%2012-ed2%20Harmonic%20Table%20Sonome%20Tonnetz%205-Limit%20Tuning%20Lattice%20Tri-Axial%20Matrix%20Model%20(of%20Musical%20Harmony).scl%0A!%2012-tone%20equal%20tempered%20scale%20consisting%20of%2012%20sonically%20equal%20divisions%20per%20frequency%20halving%2Fdoubling%2C%20mapped%20on%20the%20Harmonic%20Table%20layout%2C%20also%20known%20as%20Sonome%3A%20a%20tonal%20array%20topologically%20equivalent%20to%20Euler%27s%20Tonnetz%2C%20which%20is%20a%20conceptual%20lattice%20diagram%20representing%20tonal%20space%2C%20also%20known%20as%205-Limit%20Tuning%20Lattice%20or%20Tri-Axial%20The%20Matrix%20Model%20(of%20Musical%20Harmony).%0A!%0ATerpstra%20Keyboard%20WebApp%20%7C%2012-ed2%20Harmonic%20Table%20%2F%20Sonome%20%2F%20Tonnetz%20%2F%205-Limit%20Tuning%20Lattice%20%2F%20Tri-Axial%20Matrix%20Model%20(of%20Musical%20Harmony)%0A12%0A!%0A100.00000%0A200.00000%0A300.00000%0A400.00000%0A500.00000%0A600.00000%0A700.00000%0A800.00000%0A900.00000%0A1000.00000%0A1100.00000%0A1200.00000&names=C%0AD%E2%99%AD%2FC%E2%99%AF%0AD%0AE%E2%99%AD%2FD%E2%99%AF%0AE%0AF%0AG%E2%99%AD%2FF%E2%99%AF%0AG%0AA%E2%99%AD%2FG%E2%99%AF%0AA%0AB%E2%99%AD%2FA%E2%99%AF%0AB">Harmonic Table / Sonome / Tonnetz / 5-L Lattice / Matrix Model</option>
                    
					<option value="keys.htm?fundamental=261.6255653&right=2&upright=7&size=50&rotation=343.897886248&instrument=rhodes&enum=false&equivSteps=12&piano_colors=true&no_labels=false&scale=!%2012-ed2%20Wicki-Hayden.scl%0A!%2012-tone%20equal%20tempered%20scale%20consisting%20of%2012%20sonically%20equal%20divisions%20per%20frequency%20halving%2Fdoubling%2C%20mapped%20on%20the%20Wicki-Hayden%20layout%2C%20originally%20devised%20for%20the%20bandoneon%20and%20concertina%20(free-reed%20aerophones%20of%20the%20harmonica%2Faccordion%20family).%0A!%0ATerpstra%20Keyboard%20WebApp%20%7C%2012-ed2%20Wicki-Hayden%0A12%0A!%0A100.00000%0A200.00000%0A300.00000%0A400.00000%0A500.00000%0A600.00000%0A700.00000%0A800.00000%0A900.00000%0A1000.00000%0A1100.00000%0A1200.00000&names=C%0AD%E2%99%AD%2FC%E2%99%AF%0AD%0AE%E2%99%AD%2FD%E2%99%AF%0AE%0AF%0AG%E2%99%AD%2FF%E2%99%AF%0AG%0AA%E2%99%AD%2FG%E2%99%AF%0AA%0AB%E2%99%AD%2FA%E2%99%AF%0AB">Wicki-Hayden</option>
                    
					<option value="keys.htm?fundamental=261.6255653&right=3&upright=2&size=50&rotation=343.897886248&instrument=sawtooth&enum=false&equivSteps=12&piano_colors=true&no_labels=false&scale=!%2012-ed2%20B-System%20Chromatic%20Button.scl%0A!%2012-tone%20equal%20tempered%20scale%20consisting%20of%2012%20sonically%20equal%20divisions%20per%20frequency%20halving%2Fdoubling%2C%20mapped%20on%20a%20(hexagonal)%20tilted%20Chromatic%20Button%20System%20Type-B%20used%20on%20some%20button%20accordions.%0A!%0ATerpstra%20Keyboard%20WebApp%20%7C%2012-ed2%20B-System%20Chromatic%20Button%0A12%0A!%0A100.00000%0A200.00000%0A300.00000%0A400.00000%0A500.00000%0A600.00000%0A700.00000%0A800.00000%0A900.00000%0A1000.00000%0A1100.00000%0A1200.00000&names=C%0AD%E2%99%AD%2FC%E2%99%AF%0AD%0AE%E2%99%AD%2FD%E2%99%AF%0AE%0AF%0AG%E2%99%AD%2FF%E2%99%AF%0AG%0AA%E2%99%AD%2FG%E2%99%AF%0AA%0AB%E2%99%AD%2FA%E2%99%AF%0AB">B-System Chromatic Button</option>
                    
					<option value="keys.htm?fundamental=261.6255653&right=3&upright=1&size=50&rotation=343.897886248&instrument=sawtooth&enum=false&equivSteps=12&piano_colors=true&no_labels=false&scale=!%2012-ed2%20C-System%20Chromatic%20Button.scl%0A!%2012-tone%20equal%20tempered%20scale%20consisting%20of%2012%20sonically%20equal%20divisions%20per%20frequency%20halving%2Fdoubling%2C%20mapped%20on%20a%20(hexagonal)%20tilted%20Chromatic%20Button%20System%20Type-C%20used%20on%20some%20button%20accordions.%0A!%0ATerpstra%20Keyboard%20WebApp%20%7C%2012-ed2%20C-System%20Chromatic%20Button%0A12%0A!%0A100.00000%0A200.00000%0A300.00000%0A400.00000%0A500.00000%0A600.00000%0A700.00000%0A800.00000%0A900.00000%0A1000.00000%0A1100.00000%0A1200.00000&names=C%0AD%E2%99%AD%2FC%E2%99%AF%0AD%0AE%E2%99%AD%2FD%E2%99%AF%0AE%0AF%0AG%E2%99%AD%2FF%E2%99%AF%0AG%0AA%E2%99%AD%2FG%E2%99%AF%0AA%0AB%E2%99%AD%2FA%E2%99%AF%0AB">C-System Chromatic Button</option>
				</optgroup>
                
				<optgroup label="Just Intonation">
					<option value="keys.htm?fundamental=256&right=2&upright=1&size=50&rotation=343.897886248&instrument=piano&enum=false&equivSteps=12&piano_colors=false&no_labels=false&scale=!%2012-JI-7L%20Jank%C3%B3%206-6%20Balanced%20Symmetric%20Bilinear%20Uniform%20Keyboard%20~Halberstadt.scl%0A!%2012-tone%20Just%20Intonation%20classic%207-Limit%20scale%2C%20consisting%20of%2012%20rational%20divisions%20per%20frequency%20halving%2Fdoubling%20with%20sonic%20distances%20derived%20from%20the%20harmonic%20series%20up%20to%20a%20prime%20limit%20of%207%2C%20mapped%20on%20a%20(hexagonal)%20tilted%20Jank%C3%B3%20layout%20which%20can%20be%20regarded%20as%20a%20stacked%206-6%2FBalanced%2FSymmetric%2FBilinear%2FUniform%20Keyboard%2C%20and%20which%20approximates%20the%207-white%2F5-black%20Halberstadt%20organ%20layout%20(the%20classic%20piano%20keyboard).%0A!%0ATerpstra%20Keyboard%20WebApp%20%7C%2012-JI-7L%20Jank%C3%B3%20%2F%206-6%2FBalanced%2FSymmetric%2FBilinear%2FUniform%20Keyboard%20%2F%20~Halberstadt%0A12%0A!%0A16%2F15%0A9%2F8%0A6%2F5%0A5%2F4%0A4%2F3%0A7%2F5%0A3%2F2%0A8%2F5%0A5%2F3%0A7%2F4%0A15%2F8%0A2%2F1&names=1%2F1%0A16%2F15%0A9%2F8%0A6%2F5%0A5%2F4%0A4%2F3%0A7%2F5%0A3%2F2%0A8%2F5%0A5%2F3%0A7%2F4%0A15%2F8">12-JI-7L Jankó / 6-6/Balanced/Symmetric/Bilinear/Uniform</option>
                    
					<option value="keys.htm?fundamental=256&right=3&upright=2&size=50&rotation=343.897886248&instrument=harp&enum=false&equivSteps=17&piano_colors=false&no_labels=false&scale=!%2017-JI-11L-Wilson%20Bosanquet%20Wilson%20Terpstra.scl%0A!%2017-tone%20Just%20Intonation%2011-Limit%20scale%20by%20Erv%20Wilson%2C%20consisting%20of%2017%20rational%20divisions%20per%20frequency%20halving%2Fdoubling%20with%20sonic%20distances%20derived%20from%20the%20harmonic%20series%20up%20to%20a%20prime%20limit%20of%2011%2C%20mapped%20on%20a%20Bosanquet%20%2F%20Wilson%20%2F%20Terpstra%20layout.%0A!%20Fokblock(%5B64%2F63%2C%2056%2F55%2C%20968%2F945%2C%2036%2F35%5D%2C%20%5B5%2C%206%2C%2011%2C%206%5D)%20%3D%20%0A!%20Fokblock(%5B64%2F63%2C%2056%2F55%2C%2036%2F35%2C%20704%2F675%5D%2C%20%5B5%2C%203%2C%206%2C%2011%5D)%20%3D%0A!%20Fokblock(%5B64%2F63%2C%20968%2F945%2C%2036%2F35%2C%20704%2F675%5D%2C%20%5B5%2C%2013%2C%206%2C%206%5D)%20wakalix%0ATerpstra%20Keyboard%20WebApp%20%7C%2017-JI-11L-Wilson%20Bosanquet%20%2F%20Wilson%20%2F%20Terpstra%0A17%0A!%0A22%2F21%0A11%2F10%0A9%2F8%0A7%2F6%0A11%2F9%0A5%2F4%0A4%2F3%0A11%2F8%0A22%2F15%0A3%2F2%0A11%2F7%0A44%2F27%0A5%2F3%0A7%2F4%0A11%2F6%0A15%2F8%0A2%2F1&names=R%0A22%2F21%0A11%2F10%0A9%2F8%0A7%2F6%0A11%2F9%0A5%2F4%0A4%2F3%0A11%2F8%0A22%2F15%0A3%2F2%0A11%2F7%0A44%2F27%0A5%2F3%0A7%2F4%0A11%2F6%0A15%2F8">17-JI-11L-Wilson Bosanquet / Wilson / Terpstra</option>
                    
					<option value="keys.htm?fundamental=264&right=5&upright=2&size=50&rotation=343.897886248&instrument=organ&enum=false&equivSteps=31&piano_colors=false&no_labels=false&scale=!%2031-JI-7L-Fokker%20Bosanquet%20Wilson%20Terpstra.scl%0A!%2031-tone%20Just%20Intonation%207-Limit%20scale%20by%20Adriaan%20Fokker%2C%20consisting%20of%2031%20rational%20divisions%20per%20frequency%20halving%2Fdoubling%20with%20sonic%20distances%20derived%20from%20the%20harmonic%20series%20up%20to%20a%20prime%20limit%20of%207%2C%20mapped%20on%20a%20Bosanquet%20%2F%20Wilson%20%2F%20Terpstra%20layout.%0A!%0ATerpstra%20Keyboard%20WebApp%20%7C%2031-JI-7L-Fokker%20Bosanquet%20%2F%20Wilson%20%2F%20Terpstra%0A31%0A!%0A64%2F63%0A135%2F128%0A15%2F14%0A35%2F32%0A9%2F8%0A8%2F7%0A7%2F6%0A135%2F112%0A315%2F256%0A5%2F4%0A9%2F7%0A21%2F16%0A4%2F3%0A175%2F128%0A45%2F32%0A10%2F7%0A35%2F24%0A3%2F2%0A32%2F21%0A14%2F9%0A45%2F28%0A105%2F64%0A5%2F3%0A12%2F7%0A7%2F4%0A16%2F9%0A945%2F512%0A15%2F8%0A40%2F21%0A63%2F32%0A2%2F1&names=1%2F1%0A64%2F63%0A135%2F128%0A15%2F14%0A35%2F32%0A9%2F8%0A8%2F7%0A7%2F6%0A135%2F112%0A315%2F256%0A5%2F4%0A9%2F7%0A21%2F16%0A4%2F3%0A175%2F128%0A45%2F32%0A10%2F7%0A35%2F24%0A3%2F2%0A32%2F21%0A14%2F9%0A45%2F28%0A105%2F64%0A5%2F3%0A12%2F7%0A7%2F4%0A16%2F9%0A945%2F512%0A15%2F8%0A40%2F21%0A63%2F32">31-JI-7L-Fokker Bosanquet / Wilson / Terpstra</option>
                    
					<option value="keys.htm?fundamental=260.74074074&right=7&upright=3&size=50&rotation=343.897886248&instrument=gayageum&enum=false&equivSteps=43&piano_colors=false&no_labels=false&scale=!%2043-JI-11L-Partch%20Bosanquet%20Wilson%20Terpstra.scl%0A!%2043-tone%20Just%20Intonation%2011-Limit%20scale%20by%20Harry%20Partch%2C%20consisting%20of%2043%20rational%20divisions%20per%20frequency%20halving%2Fdoubling%20with%20sonic%20distances%20derived%20symmetrically%20from%20both%20ascending%20and%20descending%20harmonic%20series%20(otonalities%20and%20utonalities)%20up%20to%20a%20prime%20limit%20of%2011%2C%20mapped%20on%20a%20Bosanquet%20%2F%20Wilson%20%2F%20Terpstra%20layout.%0A!%0ATerpstra%20Keyboard%20WebApp%20%7C%2043-JI-11L-Partch%20Bosanquet%20%2F%20Wilson%20%2F%20Terpstra%0A43%0A!%0A81%2F80%0A33%2F32%0A21%2F20%0A16%2F15%0A12%2F11%0A11%2F10%0A10%2F9%0A9%2F8%0A8%2F7%0A7%2F6%0A32%2F27%0A6%2F5%0A11%2F9%0A5%2F4%0A14%2F11%0A9%2F7%0A21%2F16%0A4%2F3%0A27%2F20%0A11%2F8%0A7%2F5%0A10%2F7%0A16%2F11%0A40%2F27%0A3%2F2%0A32%2F21%0A14%2F9%0A11%2F7%0A8%2F5%0A18%2F11%0A5%2F3%0A27%2F16%0A12%2F7%0A7%2F4%0A16%2F9%0A9%2F5%0A20%2F11%0A11%2F6%0A15%2F8%0A40%2F21%0A64%2F33%0A160%2F81%0A2%2F1&names=1%2F1%0A81%2F80%0A33%2F32%0A21%2F20%0A16%2F15%0A12%2F11%0A11%2F10%0A10%2F9%0A9%2F8%0A8%2F7%0A7%2F6%0A32%2F27%0A6%2F5%0A11%2F9%0A5%2F4%0A14%2F11%0A9%2F7%0A21%2F16%0A4%2F3%0A27%2F20%0A11%2F8%0A7%2F5%0A10%2F7%0A16%2F11%0A40%2F27%0A3%2F2%0A32%2F21%0A14%2F9%0A11%2F7%0A8%2F5%0A18%2F11%0A5%2F3%0A27%2F16%0A12%2F7%0A7%2F4%0A16%2F9%0A9%2F5%0A20%2F11%0A11%2F6%0A15%2F8%0A40%2F21%0A64%2F33%0A160%2F81">43-JI-11L-Partch Bosanquet / Wilson / Terpstra</option>
                    
					<option value="keys.htm?fundamental=256&right=9&upright=5&size=50&rotation=343.897886248&instrument=qanun&enum=false&equivSteps=53&piano_colors=false&no_labels=false&scale=!%2053-RI-3L%20Bosanquet%20Wilson%20Terpstra%20Male%20(Western).scl%0A!%2053-tone%20Rational%20Intonation%203-Limit%20scale%2C%20consisting%20of%2053%20rational%20divisions%20per%20frequency%20halving%2Fdoubling%20with%20sonic%20distances%20derived%20solely%20from%20the%20harmonics%202%20and%203%20of%20both%20ascending%20and%20descending%20harmonic%20series%2C%20mapped%20on%20a%20Bosanquet%20%2F%20Wilson%20%2F%20Terpstra%20Male%20(Western)%20layout.%0A!%0ATerpstra%20Keyboard%20WebApp%20%7C%2053-RI-3L%20Bosanquet%20%2F%20Wilson%20%2F%20Terpstra%20Male%20(Western)%0A53%0A!%0A531441%2F524288%0A282429536481%2F274877906944%0A134217728%2F129140163%0A256%2F243%0A2187%2F2048%0A1162261467%2F1073741824%0A34359738368%2F31381059609%0A65536%2F59049%0A9%2F8%0A4782969%2F4194304%0A2541865828329%2F2199023255552%0A16777216%2F14348907%0A32%2F27%0A19683%2F16384%0A10460353203%2F8589934592%0A4294967296%2F3486784401%0A8192%2F6561%0A81%2F64%0A43046721%2F33554432%0A1099511627776%2F847288609443%0A2097152%2F1594323%0A4%2F3%0A177147%2F131072%0A94143178827%2F68719476736%0A536870912%2F387420489%0A1024%2F729%0A729%2F512%0A387420489%2F268435456%0A137438953472%2F94143178827%0A262144%2F177147%0A3%2F2%0A1594323%2F1048576%0A847288609443%2F549755813888%0A67108864%2F43046721%0A128%2F81%0A6561%2F4096%0A3486784401%2F2147483648%0A17179869184%2F10460353203%0A32768%2F19683%0A27%2F16%0A14348907%2F8388608%0A4398046511104%2F2541865828329%0A8388608%2F4782969%0A16%2F9%0A59049%2F32768%0A31381059609%2F17179869184%0A2147483648%2F1162261467%0A4096%2F2187%0A243%2F128%0A129140163%2F67108864%0A549755813888%2F282429536481%0A1048576%2F531441%0A2%2F1&names=2%E2%81%B0%7C3%E2%81%B0%0A2%C2%B9%E2%81%B9%7C3%C2%B9%C2%B2%0A2%C2%B3%E2%81%B8%7C3%C2%B2%E2%81%B4%0A3%C2%B9%E2%81%B7%7C2%C2%B2%E2%81%B7%0A3%E2%81%B5%7C2%E2%81%B8%0A2%C2%B9%C2%B9%7C3%E2%81%B7%0A2%C2%B3%E2%81%B0%7C3%C2%B9%E2%81%B9%0A3%C2%B2%C2%B2%7C2%C2%B3%E2%81%B5%0A3%C2%B9%E2%81%B0%7C2%C2%B9%E2%81%B6%0A2%C2%B3%7C3%C2%B2%0A2%C2%B2%C2%B2%7C3%C2%B9%E2%81%B4%0A2%E2%81%B4%C2%B9%7C3%C2%B2%E2%81%B6%0A3%C2%B9%E2%81%B5%7C2%C2%B2%E2%81%B4%0A3%C2%B3%7C2%E2%81%B5%0A2%C2%B9%E2%81%B4%7C3%E2%81%B9%0A2%C2%B3%C2%B3%7C3%C2%B2%C2%B9%0A3%C2%B2%E2%81%B0%7C2%C2%B3%C2%B2%0A3%E2%81%B8%7C2%C2%B9%C2%B3%0A2%E2%81%B6%7C3%E2%81%B4%0A2%C2%B2%E2%81%B5%7C3%C2%B9%E2%81%B6%0A3%C2%B2%E2%81%B5%7C2%E2%81%B4%E2%81%B0%0A3%C2%B9%C2%B3%7C2%C2%B2%C2%B9%0A3%C2%B9%7C2%C2%B2%0A2%C2%B9%E2%81%B7%7C3%C2%B9%C2%B9%0A2%C2%B3%E2%81%B6%7C3%C2%B2%C2%B3%0A3%C2%B9%E2%81%B8%7C2%C2%B2%E2%81%B9%0A3%E2%81%B6%7C2%C2%B9%E2%81%B0%0A2%E2%81%B9%7C3%E2%81%B6%0A2%C2%B2%E2%81%B8%7C3%C2%B9%E2%81%B8%0A3%C2%B2%C2%B3%7C2%C2%B3%E2%81%B7%0A3%C2%B9%C2%B9%7C2%C2%B9%E2%81%B8%0A2%C2%B9%7C3%C2%B9%0A2%C2%B2%E2%81%B0%7C3%C2%B9%C2%B3%0A2%C2%B3%E2%81%B9%7C3%C2%B2%E2%81%B5%0A3%C2%B9%E2%81%B6%7C2%C2%B2%E2%81%B6%0A3%E2%81%B4%7C2%E2%81%B7%0A2%C2%B9%C2%B2%7C3%E2%81%B8%0A2%C2%B3%C2%B9%7C3%C2%B2%E2%81%B0%0A3%C2%B2%C2%B9%7C2%C2%B3%E2%81%B4%0A3%E2%81%B9%7C2%C2%B9%E2%81%B5%0A2%E2%81%B4%7C3%C2%B3%0A2%C2%B2%C2%B3%7C3%C2%B9%E2%81%B5%0A3%C2%B2%E2%81%B6%7C2%E2%81%B4%C2%B2%0A3%C2%B9%E2%81%B4%7C2%C2%B2%C2%B3%0A3%C2%B2%7C2%E2%81%B4%0A2%C2%B9%E2%81%B5%7C3%C2%B9%E2%81%B0%0A2%C2%B3%E2%81%B4%7C3%C2%B2%C2%B2%0A3%C2%B9%E2%81%B9%7C2%C2%B3%C2%B9%0A3%E2%81%B7%7C2%C2%B9%C2%B2%0A2%E2%81%B7%7C3%E2%81%B5%0A2%C2%B2%E2%81%B6%7C3%C2%B9%E2%81%B7%0A3%C2%B2%E2%81%B4%7C2%C2%B3%E2%81%B9%0A3%C2%B9%C2%B2%7C2%C2%B2%E2%81%B0%0A3%E2%81%B0%7C2%C2%B9">53-RI-3L Bosanquet / Wilson / Terpstra Male (Western)</option>
                    
					<option value="keys.htm?fundamental=256&right=9&upright=4&size=50&rotation=16.102113751&instrument=qanun&enum=false&equivSteps=53&piano_colors=false&no_labels=false&scale=!%2053-RI-3L%20Bosanquet%20Wilson%20Terpstra%20Female%20(Eastern).scl%0A!%2053-tone%20Rational%20Intonation%203-Limit%20scale%2C%20consisting%20of%2053%20rational%20divisions%20per%20frequency%20halving%2Fdoubling%20with%20sonic%20distances%20derived%20solely%20from%20the%20harmonics%202%20and%203%20of%20both%20ascending%20and%20descending%20harmonic%20series%2C%20mapped%20on%20a%20Bosanquet%20%2F%20Wilson%20%2F%20Terpstra%20Female%20(Eastern)%20layout.%0A!%0ATerpstra%20Keyboard%20WebApp%20%7C%2053-RI-3L%20Bosanquet%20%2F%20Wilson%20%2F%20Terpstra%20Female%20(Eastern)%0A53%0A!%0A531441%2F524288%0A282429536481%2F274877906944%0A134217728%2F129140163%0A256%2F243%0A2187%2F2048%0A1162261467%2F1073741824%0A34359738368%2F31381059609%0A65536%2F59049%0A9%2F8%0A4782969%2F4194304%0A2541865828329%2F2199023255552%0A16777216%2F14348907%0A32%2F27%0A19683%2F16384%0A10460353203%2F8589934592%0A4294967296%2F3486784401%0A8192%2F6561%0A81%2F64%0A43046721%2F33554432%0A1099511627776%2F847288609443%0A2097152%2F1594323%0A4%2F3%0A177147%2F131072%0A94143178827%2F68719476736%0A536870912%2F387420489%0A1024%2F729%0A729%2F512%0A387420489%2F268435456%0A137438953472%2F94143178827%0A262144%2F177147%0A3%2F2%0A1594323%2F1048576%0A847288609443%2F549755813888%0A67108864%2F43046721%0A128%2F81%0A6561%2F4096%0A3486784401%2F2147483648%0A17179869184%2F10460353203%0A32768%2F19683%0A27%2F16%0A14348907%2F8388608%0A4398046511104%2F2541865828329%0A8388608%2F4782969%0A16%2F9%0A59049%2F32768%0A31381059609%2F17179869184%0A2147483648%2F1162261467%0A4096%2F2187%0A243%2F128%0A129140163%2F67108864%0A549755813888%2F282429536481%0A1048576%2F531441%0A2%2F1&names=2%E2%81%B0%7C3%E2%81%B0%0A2%C2%B9%E2%81%B9%7C3%C2%B9%C2%B2%0A2%C2%B3%E2%81%B8%7C3%C2%B2%E2%81%B4%0A3%C2%B9%E2%81%B7%7C2%C2%B2%E2%81%B7%0A3%E2%81%B5%7C2%E2%81%B8%0A2%C2%B9%C2%B9%7C3%E2%81%B7%0A2%C2%B3%E2%81%B0%7C3%C2%B9%E2%81%B9%0A3%C2%B2%C2%B2%7C2%C2%B3%E2%81%B5%0A3%C2%B9%E2%81%B0%7C2%C2%B9%E2%81%B6%0A2%C2%B3%7C3%C2%B2%0A2%C2%B2%C2%B2%7C3%C2%B9%E2%81%B4%0A2%E2%81%B4%C2%B9%7C3%C2%B2%E2%81%B6%0A3%C2%B9%E2%81%B5%7C2%C2%B2%E2%81%B4%0A3%C2%B3%7C2%E2%81%B5%0A2%C2%B9%E2%81%B4%7C3%E2%81%B9%0A2%C2%B3%C2%B3%7C3%C2%B2%C2%B9%0A3%C2%B2%E2%81%B0%7C2%C2%B3%C2%B2%0A3%E2%81%B8%7C2%C2%B9%C2%B3%0A2%E2%81%B6%7C3%E2%81%B4%0A2%C2%B2%E2%81%B5%7C3%C2%B9%E2%81%B6%0A3%C2%B2%E2%81%B5%7C2%E2%81%B4%E2%81%B0%0A3%C2%B9%C2%B3%7C2%C2%B2%C2%B9%0A3%C2%B9%7C2%C2%B2%0A2%C2%B9%E2%81%B7%7C3%C2%B9%C2%B9%0A2%C2%B3%E2%81%B6%7C3%C2%B2%C2%B3%0A3%C2%B9%E2%81%B8%7C2%C2%B2%E2%81%B9%0A3%E2%81%B6%7C2%C2%B9%E2%81%B0%0A2%E2%81%B9%7C3%E2%81%B6%0A2%C2%B2%E2%81%B8%7C3%C2%B9%E2%81%B8%0A3%C2%B2%C2%B3%7C2%C2%B3%E2%81%B7%0A3%C2%B9%C2%B9%7C2%C2%B9%E2%81%B8%0A2%C2%B9%7C3%C2%B9%0A2%C2%B2%E2%81%B0%7C3%C2%B9%C2%B3%0A2%C2%B3%E2%81%B9%7C3%C2%B2%E2%81%B5%0A3%C2%B9%E2%81%B6%7C2%C2%B2%E2%81%B6%0A3%E2%81%B4%7C2%E2%81%B7%0A2%C2%B9%C2%B2%7C3%E2%81%B8%0A2%C2%B3%C2%B9%7C3%C2%B2%E2%81%B0%0A3%C2%B2%C2%B9%7C2%C2%B3%E2%81%B4%0A3%E2%81%B9%7C2%C2%B9%E2%81%B5%0A2%E2%81%B4%7C3%C2%B3%0A2%C2%B2%C2%B3%7C3%C2%B9%E2%81%B5%0A3%C2%B2%E2%81%B6%7C2%E2%81%B4%C2%B2%0A3%C2%B9%E2%81%B4%7C2%C2%B2%C2%B3%0A3%C2%B2%7C2%E2%81%B4%0A2%C2%B9%E2%81%B5%7C3%C2%B9%E2%81%B0%0A2%C2%B3%E2%81%B4%7C3%C2%B2%C2%B2%0A3%C2%B9%E2%81%B9%7C2%C2%B3%C2%B9%0A3%E2%81%B7%7C2%C2%B9%C2%B2%0A2%E2%81%B7%7C3%E2%81%B5%0A2%C2%B2%E2%81%B6%7C3%C2%B9%E2%81%B7%0A3%C2%B2%E2%81%B4%7C2%C2%B3%E2%81%B9%0A3%C2%B9%C2%B2%7C2%C2%B2%E2%81%B0%0A3%E2%81%B0%7C2%C2%B9">53-RI-3L Bosanquet / Wilson / Terpstra Female (Eastern)</option>
				</optgroup>

				<optgroup label="Equal Temperaments">
					<option value="keys.htm?fundamental=254.5642522&right=3&upright=1&size=50&rotation=343.897886248&instrument=piano&enum=false&equivSteps=19&piano_colors=false&no_labels=false&scale=!%2019-ed2%20Bosanquet%20Wilson%20Terpstra.scl%0A!%2019-tone%20equal%20tempered%20scale%20consisting%20of%2012%20sonically%20equal%20divisions%20per%20frequency%20halving%2Fdoubling%2C%20mapped%20on%20a%20Bosanquet%20%2F%20Wilson%20%2F%20Terpstra%20layout.%0A!%0ATerpstra%20Keyboard%20WebApp%20%7C%2019-ed2%20Bosanquet%20%2F%20Wilson%20%2F%20Terpstra%0A19%0A!%0A63.15789%0A126.31579%0A189.47368%0A252.63158%0A315.78947%0A378.94737%0A442.10526%0A505.26316%0A568.42105%0A631.57895%0A694.73684%0A757.89474%0A821.05263%0A884.21053%0A947.36842%0A1010.52632%0A1073.68421%0A1136.84211%0A1200.00000&names=C%0AC%E2%99%AF%0AD%E2%99%AD%0AD%0AD%E2%99%AF%0AE%E2%99%AD%0AE%0AE%E2%99%AF%2FF%E2%99%AD%0AF%0AF%E2%99%AF%0AG%E2%99%AD%0AG%0AG%E2%99%AF%0AA%E2%99%AD%0AA%0AA%E2%99%AF%0AB%E2%99%AD%0AB%0AB%E2%99%AF%2FC%E2%99%AD">19-ed2 Bosanquet / Wilson / Terpstra</option>
                    
					<option value="keys.htm?fundamental=263.09212&right=5&upright=2&size=50&rotation=343.897886248&instrument=organ&enum=false&equivSteps=31&piano_colors=false&no_labels=false&scale=!%2031-ed2%20Bosanquet%20Wilson%20Terpstra.scl%0A!%2031-tone%20equal%20tempered%20scale%20consisting%20of%2031%20sonically%20equal%20divisions%20per%20frequency%20halving%2Fdoubling%20in%20standard%20meantone%20notation%2C%20mapped%20on%20a%20Bosanquet%20%2F%20Wilson%20%2F%20Terpstra%20layout.%0A!%0ATerpstra%20Keyboard%20WebApp%20%7C%2031-ed2%20Bosanquet%20%2F%20Wilson%20%2F%20Terpstra%0A31%0A!%0A38.70968%0A77.41935%0A116.12903%0A154.83871%0A193.54839%0A232.25806%0A270.96774%0A309.67742%0A348.38710%0A387.09677%0A425.80645%0A464.51613%0A503.22581%0A541.93548%0A580.64516%0A619.35484%0A658.06452%0A696.77419%0A735.48387%0A774.19355%0A812.90323%0A851.61290%0A890.32258%0A929.03226%0A967.74194%0A1006.45161%0A1045.16129%0A1083.87097%0A1122.58065%0A1161.29032%0A1200.00000&names=C%0AD%E2%99%AD%E2%99%AD%0AC%E2%99%AF%0AD%E2%99%AD%0AC%C3%97%0AD%0AE%E2%99%AD%E2%99%AD%0AD%E2%99%AF%0AE%E2%99%AD%0AD%C3%97%0AE%0AF%E2%99%AD%0AE%E2%99%AF%0AF%0AG%E2%99%AD%E2%99%AD%0AF%E2%99%AF%0AG%E2%99%AD%0AF%C3%97%0AG%0AA%E2%99%AD%E2%99%AD%0AG%E2%99%AF%0AA%E2%99%AD%0AG%C3%97%0AA%0AB%E2%99%AD%E2%99%AD%0AA%E2%99%AF%0AB%E2%99%AD%0AA%C3%97%0AB%0AC%E2%99%AD%0AB%E2%99%AF">31-ed2 Bosanquet / Wilson / Terpstra</option>
				</optgroup>

			</select>


			<form id="settingsForm">
				<div class="row">
					<div class="one-half column">

						<label>Fundamental (Hz)</label>
						<input id="fundamental" step="any" min="20" max="20000" value="261.6255653" onchange="changeURL()" type="number">
			
						<label>Right Facing Steps</label>
						<input id="rSteps" min="-1220" max="1220" value="3" onchange="changeURL()" type="number">  
				
						<label>Up/Right Facing Steps</label>
						<input id="urSteps" min="-1220" max="1220" value="10" onchange="changeURL()" type="number">   
					</div>
					<div class="one-half column">
						<label>Hex Size (pixels)</label>
						<input id="hexSize" step="any" min="20" max="1000" value="50" onchange="changeURL()" type="number"><br>  
			
						<label>Rotation (degrees)</label>
						<input id="rotation" step="any" min="0" max="360" value="343.897886248" onchange="changeURL()" type="number"><br>  
			
						<label>Instrument</label>
						<select id="instrument" onchange="changeURL()">
							<option value="piano">Piano</option>
							<option value="harpsichord">Harpsichord</option>
							<option value="rhodes">Rhodes</option>
							<option selected="selected" value="harp">Harp</option>
							<option value="choir">Choir</option>
							<option value="strings">Strings</option>
							<option value="sawtooth">Sawtooth</option>
							<option value="gayageum">Gayageum</option>
							<option value="qanun">Qanun</option>
							<option value="organ">Organ</option>
							<option value="organleslie">Organ + Leslie</option>
							<option value="5Lstudy">5-Limit Study Tone</option>
						</select>
					</div>
				</div>
				<div class="row">
					<div class="one-half column">
						<img src="1x1.png">
					</div>
					<div class="one-half column">
						<label>
							<input id="enum" name="number_or_name" value="fnord" onchange="hideRevealNames()" type="checkbox">
							<span class="label-body">Enumerate Scale</span>
						</label>

						<label>
							<input id="piano_colors" name="piano_colors" onchange="hideRevealNames()" type="checkbox">
							<span class="label-body">Piano Colors (only 12-tone C-Major layouts)</span>
						</label>

						<label>
							<input id="no_labels" name="no_labels" onchange="hideRevealNames()" type="checkbox">
							<span class="label-body">Blank Keys (no labels)</span>
						</label>
					</div>
				</div>

				<div class="row">
					<div class="one-half column">
						<label>Scale (scala format)</label>
						<textarea id="scale" onchange="changeURL()" class="iosscrollable u-full-width" rows="12">! 31-ed2 Bosanquet Wilson Terpstra.scl
! 31-tone equal tempered scale consisting of 31 sonically equal divisions per frequency halving/doubling in standard meantone notation, mapped on a Bosanquet / Wilson / Terpstra layout.
!
Terpstra Keyboard WebApp | 31-ed2 Bosanquet / Wilson / Terpstra
31
!
38.70968
77.41935
116.12903
154.83871
193.54839
232.25806
270.96774
309.67742
348.38710
387.09677
425.80645
464.51613
503.22581
541.93548
580.64516
619.35484
658.06452
696.77419
735.48387
774.19355
812.90323
851.61290
890.32258
929.03226
967.74194
1006.45161
1045.16129
1083.87097
1122.58065
1161.29032
1200.00000</textarea>
				</div>
				<div class="one-half column">
					<label id="numberLabel" style="display: none;">Steps To Equivalence Interval</label>
					<input id="equivSteps" min="1" max="200" value="" onchange="changeURL()" style="display: none;" type="number">
			
					<label id="namesLabel" style="display: block;">Note Names</label>
					<textarea id="names" onchange="changeURL()" class="iosscrollable u-full-width" rows="12" style="display: block;">C
D♭♭
C♯
D♭
C×
D
E♭♭
D♯
E♭
D×
E
F♭
E♯
F
G♭♭
F♯
G♭
F×
G
A♭♭
G♯
A♭
G×
A
B♭♭
A♯
B♭
A×
B
C♭
B♯</textarea>
					</div>
				</div>
				<br>
				<input name="Submit" value="Make me a microtonal keyboard!" type="submit">
			</form></div>
		
        <div id="donate" class="container">
			<div id="donateText">
				Killer Lick Tax
			</div>
			<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="encrypted" value="-----BEGIN PKCS7-----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-----END PKCS7-----
">
<input type="image" src="https://www.paypalobjects.com/en_GB/i/btn/btn_donate_SM.gif" border="0" name="submit" alt="PayPal – The safer, easier way to pay online.">
<img alt="" border="0" src="https://www.paypalobjects.com/en_GB/i/scr/pixel.gif" width="1" height="1">
</form>
        		</div>
        
		<div class="container">
        Designed by <a href="http://siementerpstra.com/" target="new">Siemen Terpstra</a> in the late ’80’s. WebApp developed by <a href="http://jamesfenn.com/" target="new">James Fenn</a> with additions by <a href="http://brandlew.com/" target="new">Brandon Lewis</a> and <a href="http://whatmusicreallyis.com/" title="What Music Really İs" target="new">Bo Constantinsen</a>. Credits to Scott Thompson and <a href="http://ozanyarman.com/">Dr Ozan Yarman</a> for contributing samples.
		</div>
	</div>
	<canvas id="keyboard" tabindex="1" width="1897" height="936" style="display: none; height: 936px; width: 1897px; margin-top: -468px; margin-left: -948.5px;"></canvas>
	
	<img src="back.png" id="backButton" onclick="back()" style="display: none;">
	
	<script>
		// fill in form 
    document.getElementById('settingsForm').onsubmit = goKeyboard;
    
		var getData = new QueryData(location.search, true);
		document.getElementById("fundamental").value = ("fundamental" in getData) ? getData.fundamental : 263.09212;
		document.getElementById("rSteps").value = ("right" in getData) ? getData.right : 5;
		document.getElementById("urSteps").value = ("upright" in getData) ? getData.upright : 2;
		document.getElementById("hexSize").value = ("size" in getData) ? getData.size : 50;
		document.getElementById("rotation").value = ("rotation" in getData) ? getData.rotation : 343.897886248;
		document.getElementById("instrument").value = ("instrument" in getData) ? getData.instrument : "organ";
		document.getElementById("enum").checked = ("enum" in getData) ? JSON.parse(getData.enum) : false;
		document.getElementById("equivSteps").value = ("equivSteps" in getData) ? getData.equivSteps : 31;
		document.getElementById("piano_colors").checked = ("piano_colors" in getData) ? JSON.parse(getData.piano_colors) : false;
		document.getElementById("no_labels").checked = ("no_labels" in getData) ? JSON.parse(getData.no_labels) : false;
		
		var global_pressed_interval;

		if ("scale" in getData) {
			document.getElementById("scale").value = getData.scale[0];
		}
		
		if ("names" in getData) {
			document.getElementById("names").value = getData.names[0];
		} 
		
		hideRevealNames();
		
		function hideRevealNames() {
			if (document.getElementById("enum").checked) {
				document.getElementById("equivSteps").style.display = 'block';
				document.getElementById("names").style.display = 'none';
				document.getElementById("numberLabel").style.display = 'block';
				document.getElementById("namesLabel").style.display = 'none';
			} else {
				document.getElementById("equivSteps").style.display = 'none';
				document.getElementById("names").style.display = 'block';
				document.getElementById("numberLabel").style.display = 'none';
				document.getElementById("namesLabel").style.display = 'block';
			}
			changeURL();
		}
		
		function Point(x, y) {
			this.x = x;
			this.y = y;
		}
		
		Point.prototype.equals = function(p) {
			return (this.x == p.x && this.y == p.y)
		}
		
		Point.prototype.plus = function(p) {
			var x = this.x + p.x;
			var y = this.y + p.y;
			return (new Point(x, y));
		}
		
		Point.prototype.minus = function(p) {
			var x = this.x - p.x;
			var y = this.y - p.y;
			return (new Point(x, y));
		}
		
		function changeURL() {
			var url = window.location.pathname + "?";
			// add fundamental, right, upright, size
			
			url += "fundamental=" + document.getElementById("fundamental").value
					+ "&right=" + document.getElementById("rSteps").value
					+ "&upright=" + document.getElementById("urSteps").value
					+ "&size=" + document.getElementById("hexSize").value
					+ "&rotation=" + document.getElementById("rotation").value
					+ "&instrument=" + document.getElementById("instrument").value
					+ "&enum=" + document.getElementById("enum").checked
					+ "&equivSteps=" + document.getElementById("equivSteps").value
                    + "&piano_colors=" + document.getElementById("piano_colors").checked
                    + "&no_labels=" + document.getElementById("no_labels").checked;
			
			url += "&scale=";	
			url += encodeURIComponent(document.getElementById('scale').value);
			
			url += "&names=";
			url += encodeURIComponent(document.getElementById('names').value);
			
			// Find scl file description for the page title
			
			var scaleLines = document.getElementById('scale').value.split('\n');
			var first = true;
			var foundDescription = false;
			var description = "I want a Terpstra!";
			
			scaleLines.forEach( function(line) {
				if(!(foundDescription) && !(line.match(/^\!/)) && line.match(/[a-zA-Z]+/)) {
					foundDescription = true;
					description = line;
				}
			});
			
			document.title = description;
			
			window.history.replaceState( {} , '', url ); 
		}
		
		var settings = new Object;
	
		function parseScale() {
			settings.scale = new Array;
			var scaleLines = document.getElementById('scale').value.split('\n');
			scaleLines.forEach( function(line) {
				if (line.match(/^[1234567890.\s/]+$/) && !(line.match(/^\s+$/)) ) { 
					if (line.match(/\//)) {
						// ratio
						var nd = line.split('/');
						var ratio = 1200 *  Math.log(parseInt(nd[0]) / parseInt(nd[1])) / Math.log(2);
						settings.scale.push(ratio);
					} else {
						if (line.match(/\./))
						// cents
							settings.scale.push(parseFloat(line));
					}
				}
			});
			settings.equivInterval = settings.scale.pop();
			settings.scale.unshift(0);
		}
				
		function calculateRotationMatrix(rotation, center) {
			var m = new Array;

			m[0] = Math.cos(rotation);
			m[1] = Math.sin(rotation);
			m[2] = -m[1];
			m[3] = m[0];
			m[4] = center.x - m[0] * center.x - m[2] * center.y;		
			m[5] = center.y - m[1] * center.x - m[3] * center.y;
			
			return m;
		}
		
		function applyMatrixToPoint(m, p) { /*Array, Point*/
					return new Point(
						m[0] * p.x + m[2] * p.y + m[4],
						m[1] * p.x + m[3] * p.y + m[5]
					);
		}
		
		function resizeHandler () {
			// Resize Inner and outer coordinates of canvas to preserve aspect ratio
		
			var newWidth = window.innerWidth;
			var newHeight = window.innerHeight;
			
			settings.canvas.style.height = newHeight + 'px';
			settings.canvas.style.width = newWidth + 'px';
    
			settings.canvas.style.marginTop = (-newHeight / 2) + 'px';
			settings.canvas.style.marginLeft = (-newWidth / 2) + 'px';
    
			settings.canvas.width = newWidth;
			settings.canvas.height = newHeight;
			
			// Find new centerpoint
			
			var centerX = newWidth / 2;
			var centerY = newHeight / 2;
			settings.centerpoint = new Point(centerX, centerY);
			
			// Rotate about it

			if (settings.rotationMatrix) { 
				settings.context.restore();
			}
			settings.context.save();
			
			settings.rotationMatrix = calculateRotationMatrix(-settings.rotation, settings.centerpoint);
			
			var m = calculateRotationMatrix(settings.rotation, settings.centerpoint);
			settings.context.setTransform(m[0], m[1], m[2], m[3], m[4], m[5]);
			
			// Redraw Grid
			
			drawGrid();
		}
		
		function back() {
			document.getElementById("keyboard").style.display = "none";
			document.getElementById("backButton").style.display = "none";
			document.getElementById("landing-page").style.display = "block";
			document.body.style.overflow = 'scroll';
		}
		
		function goKeyboard() {
		
			changeURL();
			
			// Set up screen 
			
			document.getElementById("landing-page").style.display = "none";
			document.getElementById("keyboard").style.display = "block";
			document.body.style.overflow = 'hidden';
			document.getElementById("backButton").style.display = "block";
			
			// set up settings constants
			
			settings.fundamental = document.getElementById("fundamental").value;
			settings.rSteps = document.getElementById("rSteps").value;
			settings.urSteps = parseFloat(settings.rSteps) - parseFloat(document.getElementById("urSteps").value); // Adjust to different coordinate system
			settings.hexSize = document.getElementById("hexSize").value;
			settings.rotation = (document.getElementById("rotation").value * 2 * Math.PI) / 360;
			parseScale();
			settings.names = document.getElementById('names').value.split('\n');
			settings.enum = document.getElementById('enum').checked;
			settings.equivSteps = parseInt(document.getElementById('equivSteps').value);
			
			settings.canvas = document.getElementById('keyboard');
			settings.context = settings.canvas.getContext('2d');
			
			settings.hexHeight = settings.hexSize * 2;
			settings.hexVert = settings.hexHeight * 3/4;
			settings.hexWidth = Math.sqrt(3)/2 * settings.hexHeight;

			settings.piano_colors = document.getElementById('piano_colors').checked;
			settings.no_labels = document.getElementById('no_labels').checked;
			
			// Set up resize handler
			
			window.addEventListener('resize', resizeHandler, false);
			window.addEventListener('orientationchange', resizeHandler, false);
			
			//... and give it an initial call
			
			resizeHandler();			
			
			// Set up synth
			
			settings.sampleBuffer = [,,,];
			var instrumentOption = document.getElementById("instrument").selectedIndex;
			var instruments = [
				{ fileName : "piano", fade : 0.1},
				{ fileName : "harpsichord", fade : 0.2},
				{ fileName : "rhodes", fade : 0.1},
				{ fileName : "harp", fade : 0.2},
				{ fileName : "choir", fade : 0.5},
				{ fileName : "strings", fade : 0.9},
				{ fileName : "sawtooth", fade : 0.2},
				{ fileName : "gayageum", fade : 1},
				{ fileName : "qanun", fade : 1},
				{ fileName : "organ", fade : 0.1},
				{ fileName : "organleslie", fade : 0.1},
				{ fileName : "5Lstudy", fade : 0.1}
				
			];
			
			//console.log(instruments[instrumentOption]);
			
			loadSample(instruments[instrumentOption].fileName, 0);
			settings.sampleFadeout = instruments[instrumentOption].fade;
			
			// Set up keyboard, touch and mouse event handlers
			
			settings.sustain = false;
			settings.sustainedNotes = new Array;
			//settings.canvas.addEventListener("keydown", sustainOn, false); // Firefox isn't firing :(
			//settings.canvas.addEventListener("keyup", sustainOff, false);
			
			window.addEventListener("keydown", sustainOn, true);
			window.addEventListener("keyup", sustainOff, false);

			//iPad Shake to toggle sustain
			if (typeof window.DeviceMotionEvent != 'undefined') 
			{
				var lastShakeCheck=0;
				var lastShakeCount=0;

			    // Shake sensitivity (a lower number is more)
			    var sensitivity = 5;

			    // Position variables
			    var x1 = 0, y1 = 0, z1 = 0, x2 = 0, y2 = 0, z2 = 0;

			    // Listen to motion events and update the position
			    window.addEventListener('devicemotion', function (e) {
			        x1 = e.accelerationIncludingGravity.x;
			        y1 = e.accelerationIncludingGravity.y;
			        z1 = e.accelerationIncludingGravity.z;
			    }, false);

			    // Periodically check the position and fire
			    // if the change is greater than the sensitivity
			    setInterval(function () {
			    	lastShakeCheck++;
			        var change = Math.abs(x1-x2+y1-y2+z1-z2);

			        if (change > sensitivity) {

			        	if(lastShakeCheck-lastShakeCount >=3)
			        	{
			        		lastShakeCount=lastShakeCheck;

				            if(settings.sustain == true)
				            {
				            	settings.sustain=false;
				            	for (var note = 0; note < settings.sustainedNotes.length; note++) {
									settings.sustainedNotes[note].noteOff();
								}
								settings.sustainedNotes = new Array;
				            	tempAlert('Sustain Off',900);
				            }
				            else
				            {
				            	settings.sustain=true;
				            	tempAlert('Sustain On',900);
				            }
			        	}
			        }

			        // Update new position
			        x2 = x1;
			        y2 = y1;
			        z2 = z1;
			    }, 300);
			}

			//
			
			settings.activeHexObjects = new Array;
			settings.canvas.addEventListener("touchstart", handleTouch, false);
			settings.canvas.addEventListener("touchend", handleTouch, false);
			settings.canvas.addEventListener("touchmove", handleTouch, false);
			
			settings.canvas.addEventListener("mousedown", function(e) {
				settings.canvas.addEventListener("mousemove", mouseActive, false);
				mouseActive(e);
			}, false);
			
			settings.canvas.addEventListener("mouseup", function(e) {
				settings.canvas.removeEventListener("mousemove", mouseActive);
				var coords = settings.activeHexObjects[0].coords;
				settings.activeHexObjects[0].noteOff();
				drawHex(coords, centsToColor(hexCoordsToCents(coords), false));
				settings.activeHexObjects.pop();
			}, false);
      return false;
		}
		
		function sustainOn (e) {
			//console.log("sustain On");
			if (e.keyCode == 32) {  // Spacebar
				settings.sustain = true;
			}
		}
		
		function sustainOff (e) {
			if (e.keyCode == 32) {  // Spacebar
				settings.sustain = false;
				for (var note = 0; note < settings.sustainedNotes.length; note++) {
					settings.sustainedNotes[note].noteOff();
				}
				settings.sustainedNotes = new Array;
			}
		}
		
		function mouseActive (e) {		
			var coords = getPointerPosition(e);
		
			coords = getHexCoordsAt(coords);
			
			if (settings.activeHexObjects.length == 0) {
				settings.activeHexObjects[0] = new ActiveHex(coords);
				var cents = hexCoordsToCents(coords);
				settings.activeHexObjects[0].noteOn(cents);
				drawHex(coords, centsToColor(cents, true)); 			
			} else {
				if (!(coords.equals(settings.activeHexObjects[0].coords))) {
					settings.activeHexObjects[0].noteOff();
					drawHex(settings.activeHexObjects[0].coords, centsToColor(hexCoordsToCents(settings.activeHexObjects[0].coords, false))); 
					
					settings.activeHexObjects[0] = new ActiveHex(coords);
					var cents = hexCoordsToCents(coords);
					settings.activeHexObjects[0].noteOn(cents);
					drawHex(coords, centsToColor(cents, true));
				}
			}
		}
		
		function getPointerPosition(e) {
			var parentPosition = getPosition(e.currentTarget);
			var xPosition = e.clientX - parentPosition.x;
			var yPosition = e.clientY - parentPosition.y;
			return new Point(xPosition, yPosition);
		}
 
		function getPosition(element) {
			var xPosition = 0;
			var yPosition = 0;
      
			while (element) {
				xPosition += (element.offsetLeft - element.scrollLeft + element.clientLeft);
				yPosition += (element.offsetTop - element.scrollTop + element.clientTop);
				element = element.offsetParent;
			}
			return { x: xPosition, y: yPosition };
		}
		
		function handleTouch(e) {
			e.preventDefault();
			
			for (var i = 0; i < settings.activeHexObjects.length; i++) {
				settings.activeHexObjects[i].release = true; 
			}
			
			for (var i = 0; i < e.targetTouches.length; i++) {
				var coords = getHexCoordsAt(new Point(e.targetTouches[i].pageX - settings.canvas.offsetLeft, e.targetTouches[i].pageY - settings.canvas.offsetTop));
				var found = false;
				
				for (var j = 0; j < settings.activeHexObjects.length; j++) {
					if (coords.equals(settings.activeHexObjects[j].coords)) {
						settings.activeHexObjects[j].release = false;
						found = true;
						
					}
				}
				if (!(found)) {
					var newHex = new ActiveHex(coords);
					var cents = hexCoordsToCents(coords);
					newHex.noteOn(cents);
					var c = centsToColor(cents, true);
					drawHex(coords, c);
					settings.activeHexObjects.push(newHex);
				}
			}
			
			for (var i = settings.activeHexObjects.length - 1; i >= 0; i--) {
				if (settings.activeHexObjects[i].release) {
					settings.activeHexObjects[i].noteOff();
					var coords = settings.activeHexObjects[i].coords;
					var c = centsToColor(hexCoordsToCents(coords), false);
					drawHex(coords, c);
					settings.activeHexObjects.splice(i, 1);
				}
			}
		}
		
		function drawGrid() {
			var max = (settings.centerpoint.x > settings.centerpoint.y) ? settings.centerpoint.x / settings.hexSize : settings.centerpoint.y / settings.hexSize;
			max = Math.floor(max);
			for (var r = -max; r < max; r++) {
				for (var ur = -max; ur < max; ur++) {
					var coords = new Point(r, ur);
					var c = centsToColor(hexCoordsToCents(coords), false);
					drawHex(coords, c);
				}
			}
		}
		
		function hexCoordsToScreen(hex) { /* Point */
			var screenX = settings.centerpoint.x + hex.x * settings.hexWidth + hex.y * settings.hexWidth / 2;
			var screenY = settings.centerpoint.y + hex.y * settings.hexVert;
			return (new Point(screenX, screenY));
		}
		
		function drawHex(p, c) { /* Point, color */
			
			var hexCenter = hexCoordsToScreen(p);
			
			// Calculate hex vertices
			
			var x = new Array;
			var y = new Array;
			for (var i = 0; i < 6; i++) {
				var angle = 2 * Math.PI / 6 * (i + 0.5);
				x[i] = hexCenter.x + settings.hexSize * Math.cos(angle);
				y[i] = hexCenter.y + settings.hexSize * Math.sin(angle);
			}
			
			// Draw filled hex
			
			settings.context.beginPath();
			settings.context.moveTo(x[0], y[0]);
			for (var i = 1; i < 6; i++) {
				settings.context.lineTo(x[i], y[i]);
			}
			settings.context.closePath();
			settings.context.fillStyle = c;
			settings.context.fill();
			
			// Save context and create a hex shaped clip
			
			settings.context.save();
			settings.context.beginPath();
			settings.context.moveTo(x[0], y[0]);
			for (var i = 1; i < 6; i++) {
				settings.context.lineTo(x[i], y[i]);
			}
			settings.context.closePath();
			settings.context.clip();
			
			// Calculate hex vertices outside clipped path
			
			var x2 = new Array;
			var y2 = new Array;
			for (var i = 0; i < 6; i++) {
				var angle = 2 * Math.PI / 6 * (i + 0.5);
				x2[i] = hexCenter.x + (parseFloat(settings.hexSize) + 3) * Math.cos(angle);
				y2[i] = hexCenter.y + (parseFloat(settings.hexSize) + 3) * Math.sin(angle);
			}
			
			// Draw shadowed stroke outside clip to create pseudo-3d effect 
			
			settings.context.beginPath();
			settings.context.moveTo(x2[0], y2[0]);
			for (var i = 1; i < 6; i++) {
				settings.context.lineTo(x2[i], y2[i]);
			}
			settings.context.closePath();
			settings.context.strokeStyle = 'black';
			settings.context.lineWidth = 5;
			settings.context.shadowBlur = 15;
			settings.context.shadowColor = 'black';
			settings.context.shadowOffsetX = 0;
			settings.context.shadowOffsetY = 0;
			settings.context.stroke();
			settings.context.restore();
			
			// Add a clean stroke around hex
			
			settings.context.beginPath();
			settings.context.moveTo(x[0], y[0]);
			for (var i = 1; i < 6; i++) {
				settings.context.lineTo(x[i], y[i]);
			}
			settings.context.closePath();
			settings.context.lineWidth = 2;
			settings.context.lineJoin = 'round';
			settings.context.strokeStyle = 'black';
			settings.context.stroke();
			
			// Add note name and equivalence interval multiple
			
			settings.context.save();
			settings.context.translate(hexCenter.x, hexCenter.y);
			settings.context.rotate(-settings.rotation);
			// hexcoords = p and screenCoords = hexCenter
	
			settings.context.fillStyle = "black";
			settings.context.font = "24pt Arial";
			settings.context.textAlign = "center";
			settings.context.textBaseline = "middle";
			
			var note = p.x * settings.rSteps + p.y * settings.urSteps;
			var equivSteps = settings.enum ? parseInt(settings.equivSteps) : settings.scale.length;
			var equivMultiple = Math.floor(note / equivSteps);
			var reducedNote = note % equivSteps;
			if (reducedNote < 0) {
				reducedNote = equivSteps + reducedNote;
			}
			
			if(!settings.no_labels)
			{
				var name = settings.enum ? "" + reducedNote : settings.names[reducedNote];
				if (name) {
					settings.context.save();
					var scaleFactor = name.length > 3 ? 3 / name.length : 1;
					scaleFactor *= settings.hexSize / 50;
					settings.context.scale(scaleFactor, scaleFactor);
					settings.context.fillText(name, 0, 0);
					settings.context.restore();
				}
				
				var scaleFactor = settings.hexSize / 50;
				settings.context.scale(scaleFactor, scaleFactor);
				settings.context.translate(10, -25);
				settings.context.fillStyle = "white";
				settings.context.font = "12pt Arial";
				settings.context.textAlign = "center";
				settings.context.textBaseline = "middle";
				settings.context.fillText(equivMultiple, 0, 0);
			}
			
			settings.context.restore();
		}
		
		function centsToColor(cents, pressed) {
			//console.log(global_pressed_interval);
			is12=false;
			if(settings.scale.length==12)
			{
				is12=true;
			}
			if(settings.piano_colors && is12==true)
			//if(0)
			{
				var r=0;
				var g=0;
				var b=0;
				var light=255;
				var dark=100;
				var down_color = 90;
				if(global_pressed_interval == 0)
				{
					//C
					r = light;
					g = light;
					b = light;
				}
				else if(global_pressed_interval == 1){ r=dark; g=dark; b=dark; }//Db
				else if(global_pressed_interval == 2){ r=light; g=light; b=light; }//D
				else if(global_pressed_interval == 3){ r=dark; g=dark; b=dark; }//Eb
				else if(global_pressed_interval == 4){ r=light; g=light; b=light; }//E
				else if(global_pressed_interval == 5){ r=light; g=light; b=light; }//F
				else if(global_pressed_interval == 6){ r=dark; g=dark; b=dark; }//Gb
				else if(global_pressed_interval == 7){ r=light; g=light; b=light; }//G
				else if(global_pressed_interval == 8){ r=dark; g=dark; b=dark; }//Ab
				else if(global_pressed_interval == 9){ r=light; g=light; b=light; }//A
				else if(global_pressed_interval == 10){ r=dark; g=dark; b=dark; }//Bb
				else if(global_pressed_interval == 11){ r=light; g=light; b=light; }//B

				if(pressed)
				{
					r-=90;
					g-=90;
				}
				return rgb(r,g,b);


			}
			var h = 1/3; // green
			var reduced = (cents / 1200) % 1;
			if (reduced < 0) reduced += 1;
			h = (reduced + h) % 1;
			var v = (pressed) ? 0.5 : 1;
			return HSVtoRGB(h, 0.7, v);
		}
		
		function roundTowardZero(val) {
			if (val < 0) {
				return Math.ceil(val);
			}
    		return Math.floor(val);
		}
		
		function hexCoordsToCents(coords) {
			var distance = coords.x * settings.rSteps + coords.y * settings.urSteps;
			var octs = roundTowardZero(distance / settings.scale.length);
			var reducedSteps = distance % settings.scale.length;
			if (reducedSteps < 0) {
				reducedSteps += settings.scale.length;
				octs -= 1;
			}
			var cents = octs * settings.equivInterval + settings.scale[reducedSteps];
			global_pressed_interval = reducedSteps;
			return cents;
		}
		
		function getHexCoordsAt(coords) {
			coords = applyMatrixToPoint(settings.rotationMatrix, coords);
			var x = coords.x - settings.centerpoint.x;
			var y = coords.y - settings.centerpoint.y;

			var q = (x * Math.sqrt(3)/3 - y / 3) / settings.hexSize;
			var r = y * 2/3 / settings.hexSize;
			
			q = Math.round(q);
			r = Math.round(r);
			
			var guess = hexCoordsToScreen(new Point(q, r));
			
			// This gets an approximation; now check neighbours for minimum distance
			
			var minimum = 100000;
			var closestHex = new Point(q, r);
			for (var qOffset = -1; qOffset < 2; qOffset++) {
				for (var rOffset = -1; rOffset < 2; rOffset++) {
					var neighbour = new Point(q + qOffset, r + rOffset);
					var diff = hexCoordsToScreen(neighbour).minus(coords);
					var distance = diff.x * diff.x + diff.y * diff.y;
					if (distance < minimum) {
						minimum = distance;
						closestHex = neighbour;
					}
				}
			}
			
			return(closestHex);  
		}
		
		function rgb(r, g, b) {
			return "rgb("+r+","+g+","+b+")";
		}
		
		function HSVtoRGB(h, s, v) {
			var r, g, b, i, f, p, q, t;
			i = Math.floor(h * 6);
			f = h * 6 - i;
			p = v * (1 - s);
			q = v * (1 - f * s);
			t = v * (1 - (1 - f) * s);
			switch (i % 6) {
				case 0: r = v, g = t, b = p; break;
				case 1: r = q, g = v, b = p; break;
				case 2: r = p, g = v, b = t; break;
				case 3: r = p, g = q, b = v; break;
				case 4: r = t, g = p, b = v; break;
				case 5: r = v, g = p, b = q; break;
			}
			return rgb(Math.floor(r * 255), Math.floor(g * 255), Math.floor(b * 255));
		}

		function ActiveHex(coords) {
			this.coords = coords;
			this.release = false;
			this.freq = 440;
		}
		
		ActiveHex.prototype.noteOn = function(cents) {
			var freq = settings.fundamental * Math.pow(2, cents / 1200);
			var source = settings.audioContext.createBufferSource(); // creates a sound source
			// Choose sample
			var sampleFreq = 110;
			var sampleNumber = 0;
			if (freq > 155) {
				if (freq > 311) {
					if (freq > 622) {
						sampleFreq = 880; sampleNumber = 3;
					} else {
						sampleFreq = 440; sampleNumber = 2;
					}
				} else {
					sampleFreq = 220; sampleNumber = 1;
				}				
			}
			
			if (!(settings.sampleBuffer[sampleNumber])) return; // Sample not yet loaded
			
			source.buffer = settings.sampleBuffer[sampleNumber];     // tell the source which sound to play
			source.playbackRate.value = freq / sampleFreq;
			// Create a gain node.
			var gainNode = settings.audioContext.createGain();
			// Connect the source to the gain node.
			source.connect(gainNode);
			// Connect the gain node to the destination.
			gainNode.connect(settings.audioContext.destination);
			source.connect(gainNode);       // connect the source to the context's destination (the speakers)
			gainNode.gain.value = 0.3;
			source.start(0);                           // play the source now
            this.source = source;
			this.gainNode = gainNode;
		}
		
		ActiveHex.prototype.noteOff = function() {
			if (settings.sustain) {
				settings.sustainedNotes.push(this);
			} else {
			var fadeout = settings.audioContext.currentTime + settings.sampleFadeout;
				if (this.gainNode) this.gainNode.gain.setTargetAtTime(0, settings.audioContext.currentTime, settings.sampleFadeout);
				if (this.source) this.source.stop(fadeout + 4); // This is a terrible fudge. Please forgive me - it's late, I'm tired, I have a deadline, I've got other shit to do

			}
		}
		
window.addEventListener('load', init, false);

function init() {
  try {
    // Fix up for prefixing
    window.AudioContext = window.AudioContext||window.webkitAudioContext;
    settings.audioContext = new AudioContext();
  }
  catch(e) {
    alert('Web Audio API is not supported in this browser');
  }
}
	
	function loadSample(name, iteration) {
		// It seems audioContext doesn't cope with simultaneous decodeAudioData calls ):
		
		var sampleFreqs = ["110", "220", "440", "880"];
		//for (var i = 0; i < 4; ++i) {
			var request = new XMLHttpRequest();
			var url = 'sounds/' + name + sampleFreqs[iteration] + '.mp3';
			//console.log(iteration);
			request.open('GET', url, true);
			request.responseType = 'arraybuffer';

			// Decode asynchronously
			request.onload = function() {
				settings.audioContext.decodeAudioData(request.response, function(buffer) {
				settings.sampleBuffer[iteration] = buffer;
				if (iteration < 3) loadSample(name, iteration + 1);
				}, onLoadError);
			}
			request.send();
		//}
	}
	
function onLoadError(e) {
	alert("Couldn't load sample");
}



function tempAlert(msg,duration)
{
	 var el = document.createElement("div");
	 el.setAttribute("style","position:absolute;top:40%;left:20%;background-color:white; font-size:25px;");
	 el.innerHTML = msg;
	 setTimeout(function(){
	  el.parentNode.removeChild(el);
	 },duration);
	 document.body.appendChild(el);
}
	
	</script>

</body></html>